var viwcaio_atc=[];jQuery(document).ready(function(){"use strict";if("undefined"==typeof viwcaio_ajax_atc_params)return!1;1==viwcaio_ajax_atc_params.ajax_atc&&jQuery(document).on("click","form:not(.woocommerce-boost-sales-cart-form) .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)",function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();let i=jQuery(this),t=jQuery(this).closest("form.cart");if(i.addClass("vi-wcaio-product-bt-atc-loading"),!t.length||i.hasClass("disabled"))return i.removeClass("vi-wcaio-product-bt-atc-loading"),!1;if(t.hasClass(".variations_form")){let a=parseInt(t.find("input[name=variation_id]").val());if(!a||a<=0)return i.removeClass("vi-wcaio-product-bt-atc-loading"),!1}let r=t.find("input[name=product_id]").val();if(r||(r=t.find("[name=add-to-cart]").val()),!r||-1!==viwcaio_ajax_atc_params.ajax_atc_pd_exclude.indexOf(r)||t.find('[name="woopb-add-to-cart"]').length)return i.attr("type","submit").trigger("click"),!1;let c={};t.find("select, input").each(function(){if(["checkbox","radio"].indexOf(jQuery(this).attr("type"))>-1&&!jQuery(this).prop("checked"))return!0;let a=jQuery(this).attr("name");a&&(c[a]=jQuery(this).val())}),c["add-to-cart"]||(c["add-to-cart"]=t.find("[name=add-to-cart]").val()),jQuery(document.body).trigger("adding_to_cart",[i,c]),viwcaio_atc.push({type:"post",url:viwcaio_ajax_atc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_add_to_cart"),data:c,beforeSend:function(a){i.removeClass("added").addClass("loading")},success:function(a){return a.error?(location.href=window.location.href,!1):"yes"===viwcaio_ajax_atc_params.cart_redirect_after_add?(window.location=viwcaio_ajax_atc_params.cart_url,!1):(jQuery(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,i]),viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||jQuery(document.body).trigger("wc_fragment_refresh"),jQuery(document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,i]),viwcaio_atc.shift(),void(viwcaio_atc.length>0?jQuery.ajax(viwcaio_atc[0]):jQuery(".vi-wcaio-sidebar-cart-content-wrap1.vi-wcaio-sidebar-cart-checkout-wrap").length&&jQuery(".vi-wcaio-sidebar-cart-content-wrap1.vi-wcaio-sidebar-cart-checkout-wrap").hasClass("vi-wcaio-disabled")||jQuery(document.body).trigger("update_checkout")))},complete:function(a){i.removeClass("loading vi-wcaio-product-bt-atc-loading").addClass("added")}}),1===viwcaio_atc.length&&jQuery.ajax(viwcaio_atc[0])}),jQuery(document).on("click",".vi-wcaio-product-bt-atc:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-not-atc):not(.vi-wcaio-product-bt-atc-loading):not(.vi-wcaio-product-bt-atc-non-ajax)",function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();let i=jQuery(this),t=jQuery(this).closest(".vi-wcaio-sb-cart-form");if(i.addClass("vi-wcaio-product-bt-atc-loading").removeClass("added"),t.length){if(1!=viwcaio_ajax_atc_params.ajax_atc)return i.trigger("click"),!1;let a=t.find("input[name=product_id]").val();if(-1!==viwcaio_ajax_atc_params.ajax_atc_pd_exclude.indexOf(a))return i.trigger("click"),!1}t.length||(t=jQuery(this).closest(".vi-wcaio-va-cart-form")),t.length||(t=jQuery(this).closest(".vi-wcaio-sidebar-cart-footer-pd"));let r=!0;if(t.find(".vi-wcaio-attribute-options").each(function(a,i){if(!jQuery(i).val())return r=!1,!1}),!r)return jQuery(".vi-wcaio-warning-wrap").length?jQuery(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open").html(viwcaio_ajax_atc_params.i18n_make_a_selection_text):jQuery("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open">'+viwcaio_ajax_atc_params.i18n_make_a_selection_text+"</div>"),setTimeout(function(){jQuery(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")},2e3),i.removeClass("vi-wcaio-product-bt-atc-loading"),!1;if(i.hasClass("vi-wcaio-button-swatches-disable")||i.hasClass("vi-wcaio-product-bt-atc-disabled"))return jQuery(".vi-wcaio-warning-wrap").length?jQuery(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open").html(viwcaio_ajax_atc_params.i18n_unavailable_text):jQuery("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open">'+viwcaio_ajax_atc_params.i18n_unavailable_text+"</div>"),setTimeout(function(){jQuery(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")},2e3),i.removeClass("vi-wcaio-product-bt-atc-loading"),!1;t.hasClass("vi-wcaio-va-cart-form")&&i.data("quantity",t.find("input.vi-wcaio-va-qty-input").val()||0);let c={};t.find("select, input").each(function(){if(["checkbox","radio"].indexOf(jQuery(this).attr("type"))>-1&&!jQuery(this).prop("checked"))return!0;let a=jQuery(this).attr("name");a&&(c[a]=jQuery(this).val())}),jQuery(document.body).trigger("adding_to_cart",[i,c]),viwcaio_atc.push({type:"post",url:viwcaio_ajax_atc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_add_to_cart"),data:c,beforeSend:function(a){t.hasClass("vi-wcaio-va-cart-form")?t.addClass("vi-wcaio-va-cart-form-loading"):t.hasClass(".vi-wcaio-sb-cart-form")&&t.closest(".vi-wcaio-sb-container").addClass("vi-wcaio-container-loading")},success:function(a){return a.error?(location.href=window.location.href,!1):jQuery(".vi-wcaio-sidebar-cart-content-open").length||"yes"!==viwcaio_ajax_atc_params.cart_redirect_after_add?(jQuery(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,i]),(!viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||jQuery(".vi-wcaio-sidebar-cart-content-open").length&&"yes"===viwcaio_ajax_atc_params.cart_redirect_after_add)&&(jQuery(".vi-wcaio-sidebar-cart-content-open").closest(".vi-wcaio-sidebar-cart-wrap").addClass("vi-wcaio-sidebar-cart-wrap-updated").find(".vi-wcaio-sidebar-cart-loading-wrap").removeClass("vi-wcaio-disabled"),jQuery(document.body).trigger("wc_fragment_refresh")),jQuery(document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,i]),viwcaio_atc.shift(),void(viwcaio_atc.length>0?jQuery.ajax(viwcaio_atc[0]):jQuery(".vi-wcaio-sidebar-cart-content-wrap1.vi-wcaio-sidebar-cart-checkout-wrap").length&&jQuery(".vi-wcaio-sidebar-cart-content-wrap1.vi-wcaio-sidebar-cart-checkout-wrap").hasClass("vi-wcaio-disabled")||jQuery(document.body).trigger("update_checkout"))):(window.location=viwcaio_ajax_atc_params.cart_url,!1)},complete:function(a){i.removeClass("vi-wcaio-product-bt-atc-loading"),t.hasClass("vi-wcaio-va-cart-form")?t.closest(".vi-wcaio-va-cart-form-wrap-wrap").find(".vi-wcaio-va-product-bt-atc-cancel").trigger("click"):t.hasClass(".vi-wcaio-sb-cart-form")&&t.closest(".vi-wcaio-sb-container").removeClass("vi-wcaio-container-loading")}}),1===viwcaio_atc.length&&jQuery.ajax(viwcaio_atc[0])})});